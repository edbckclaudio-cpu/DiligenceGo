"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{380:(e,t,o)=>{o.r(t),o.d(t,{Http:()=>a,HttpPluginWeb:()=>r});var n=o(2587),i=function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})};class r extends n.WebPlugin{constructor(){super({name:"Http",platforms:["web","electron"]})}getRequestHeader(e,t){let o=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((t,n,i)=>(t[n]=e[o[i]],t),{})[t.toLocaleLowerCase()]}nativeHeadersToObject(e){let t={};return e.forEach((e,o)=>{t[o]=e}),t}makeFetchOptions(e,t){let o=Object.assign({method:e.method||"GET",headers:e.headers},t||{}),n=this.getRequestHeader(e.headers||{},"content-type")||"";return 0===n.indexOf("application/json")?o.body=JSON.stringify(e.data):0===n.indexOf("application/x-www-form-urlencoded")||n.indexOf("multipart/form-data"),o}request(e){return i(this,void 0,void 0,function*(){let t,o=this.makeFetchOptions(e,e.webFetchExtra),n=yield fetch(e.url,o),i=n.headers.get("content-type");return t=i&&0===i.indexOf("application/json")?yield n.json():yield n.text(),{status:n.status,data:t,headers:this.nativeHeadersToObject(n.headers)}})}setCookie(e){return i(this,void 0,void 0,function*(){var t="";if(e.ageDays){let o=new Date;o.setTime(o.getTime()+24*e.ageDays*36e5),t="; expires="+o.toUTCString()}document.cookie=e.key+"="+(e.value||"")+t+"; path=/"})}getCookies(e){return i(this,void 0,void 0,function*(){return document.cookie?{value:document.cookie.split(";").map(e=>{let t=e.split(";").map(e=>e.trim())[0].split("=");return{key:t[0],value:t[1]}})}:{value:[]}})}deleteCookie(e){return i(this,void 0,void 0,function*(){document.cookie=e.key+"=; Max-Age=0"})}clearCookies(e){return i(this,void 0,void 0,function*(){document.cookie.split(";").forEach(e=>document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`))})}uploadFile(e){return i(this,void 0,void 0,function*(){let t=this.makeFetchOptions(e,e.webFetchExtra),o=new FormData;return o.append(e.name,e.blob),yield fetch(e.url,Object.assign(Object.assign({},t),{body:o,method:"POST"})),{}})}downloadFile(e){return i(this,void 0,void 0,function*(){let t=this.makeFetchOptions(e,e.webFetchExtra),o=yield fetch(e.url,t);return{blob:yield o.blob()}})}}let a=new r}}]);